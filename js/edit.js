function selectImage(e){document.getElementById("icon1").style.border="none",document.getElementById("icon2").style.border="none",document.getElementById("icon3").style.border="none",document.getElementById("icon4").style.border="none";var a=document.getElementById(e);a.style.border="5px solid #42A5F5";var i=a.src.split("/"),n=i[i.length-1];selectedIcon=n}function displayHabit(e,a,i,n,l,t,o){var d={"../img/sleep.jpg":"icon1","../img/salad.jpg":"icon2","../img/run.jpg":"icon3","../img/add.png":"icon4"};$("#edit-form").append('<p><label><span id="title_text"><i style="display:none" id="title_ex" class="fa fa-exclamation"></i>Habit Title</span></label></p><p><input id="title" type="text" name="fullname" value="'+e+'" maxlength="27"></p><p><label>Habit Icon</label></p><img id="icon1" class="icon" onclick="selectImage(\'icon1\');" src="../img/sleep.jpg" alt="sleep image"/><img id="icon2" class="icon" onclick="selectImage(\'icon2\');" src="../img/salad.jpg" alt="eat image"/><img id="icon3" class="icon" onclick="selectImage(\'icon3\');" src="../img/run.jpg" alt="run image"/><img id="icon4" class="icon" src="../img/add.png" alt="find a image"/><p id="weekly_freq"><label><i style="display:none" id="weekly_ex" class="fa fa-exclamation"></i>Weekly Frequency</label></p><div id="ck-button"><label> <input type="checkbox" name="dayOfTheWeek" value="sunday" '+i.Sunday+'><span>Sun</span></label><label> <input type="checkbox" name="dayOfTheWeek" value="monday" '+i.Monday+'><span>Mon</span></label><label> <input type="checkbox" name="dayOfTheWeek" value="tuesday" '+i.Tuesday+'><span>Tues</span></label><label> <input type="checkbox" name="dayOfTheWeek" value="wednesday" '+i.Wednesday+'><span>Wed</span></label><label> <input type="checkbox" name="dayOfTheWeek" value="thursday" '+i.Thursday+'><span>Thur</span></label><label> <input type="checkbox" name="dayOfTheWeek" value="friday" '+i.Friday+'><span>Fri</span></label><label> <input type="checkbox" name="dayOfTheWeek" value="saturday" '+i.Saturday+'><span>Sat</span></label></div><p><label>Daily Frequency</label></p><input id="others" type="number" maxlength="2" value="'+n+'"></label></p><div><p><label><div id="hour_min_ex" style="display:none" ><i class="fa fa-exclamation"></i></div><span id="noti_text">Notification Interval: </span><input id="notificationHours" type="number" maxlength="2" onchange="isNumberInHour(this)" value="'+t+'"><span class="noti_hr_min" id="hour_val">hours</span><input id="notificationMins" type="number" maxlength="2" onchange="isNumberInMin(this)" value="'+o+'" ><span class="noti_hr_min" id="min_val">minutes</span></label></p></div><p id="save_p"><input id="save" type="button" value="Save It" onClick="editOverlay()"></p>'),document.getElementById(d[a]).style.border="5px solid #42A5F5",$("input[name=frequencyPerDay][value="+n+"]").attr("checked","checked")}function editOverlay(){var e=document.getElementById("editOverlay"),a=document.getElementById("overlay");a.style.visibility="visible"==a.style.visibility?"hidden":"visible",e.style.visibility="visible"==e.style.visibility?"hidden":"visible"}function isNumberInHour(e){e.value<0&&(e.value=0),e.value>23&&(e.value=23)}function isNumberInMin(e){e.value<0&&(e.value=0),e.value>59&&(e.value=59)}var QueryString=function(){for(var e={},a=window.location.search.substring(1),i=a.split("&"),n=0;n<i.length;n++){var l=i[n].split("=");if("undefined"==typeof e[l[0]])e[l[0]]=decodeURIComponent(l[1]);else if("string"==typeof e[l[0]]){var t=[e[l[0]],decodeURIComponent(l[1])];e[l[0]]=t}else e[l[0]].push(decodeURIComponent(l[1]))}return e}(),habitId=window.location.search.substring(1),myDataRef=new Firebase("https://jjb750uy9yj.firebaseio-demo.com/habits/"+habitId+"/"),selectedIcon;$(document).on("click","#editConfirmed",function(e){var a=$("#title").val(),i=$("#others").val();if(""==a)return title_ex.style.display="block",void(title_text.style.color="red");var n=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],l={},t=document.getElementsByName("dayOfTheWeek"),o=0;editOverlay();for(var d=0,s=t.length;s>d;d++)t[d].checked?(l[n[d]]="yes",o++):l[n[d]]="no";if(0==o)return weekly_ex.style.display="block",void(weekly_freq.style.color="red");var c=$("input[name=frequencyPerDay]:checked").val(),y=myDataRef.child("habitData"),r=document.getElementById("title").value,u=document.getElementById("others").value;u=Number(u);var m=document.getElementById("notificationHours").value,p=document.getElementById("notificationMins").value;return""==m?(hour_min_ex.style.display="block",hour_min_ex.style.color="red",void(hour_val.style.color="red")):""==p?(hour_min_ex.style.display="block",hour_min_ex.style.color="red",void(min_val.style.color="red")):""!=u&&void 0!=c?(daily_oops.style.display="block",daily_ex.style.display="block",void(daily_freq.style.color="red")):""==u&&void 0==c?(daily_ex.style.display="block",void(daily_freq.style.color="red")):void 0==c&&1>u?(daily_ex.style.display="block",void(daily_freq.style.color="red")):void 0==c&&isNaN(u)?(daily_ex.style.display="block",void(daily_freq.style.color="red")):(void 0==c&&(c=u),void(/[^a-zA-Z0-9_\-\ \/]/.test(u)?alert("Input must be alphanumeric. Please remove non-alphanumeric symbols to continue."):/[^a-zA-Z0-9\-\ \/]/.test(r)?alert("Input must be alphanumeric. Please remove non-alphanumeric symbols to continue."):(y.update({name:a,text:i,iconId:selectedIcon,daysOfWeek:l,frequencyPerDay:c,notiTime:{notiHour:m,notiMins:p}}),document.location="list.html")))});var i=0;$(document).ready(function(){myDataRef.on("child_added",function(e){var a=e.val();selectedIcon=a.iconId;var i={};for(var n in a.daysOfWeek)"yes"==a.daysOfWeek[n]?i[n]="checked":i[n]="";displayHabit(a.name,a.iconId,i,a.frequencyPerDay,a.text,a.notiTime.notiHour,a.notiTime.notiMins)})});