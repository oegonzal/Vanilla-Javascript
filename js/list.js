function httpGet(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText}function showMsg(e){var t=e.parentNode.parentNode.getElementsByClassName("message")[0],i=t.getElementsByTagName("strong"),a=t.getElementsByTagName("meter"),n=e.parentElement.parentElement.id,s=myDataRef.child(n+"/habitData/habitProgress/");myDataRef.child(n+"/habitData/frequencyPerDay/");s.transaction(function(e){var t=e.maxRecord;if(e.maxRecord<=e.counter){var t=parseInt(e.maxRecord,10)+parseInt(1,10);s.update({counter:parseInt(e.counter,10)+parseInt(1,10),maxRecord:t}),a[0].value+=1,i[0].innerHTML=e.counter+1,i[1].innerHTML=e.maxRecord+1}else a[0].value+=1,i[0].innerHTML=e.counter+1,i[1].innerHTML=e.maxRecord,s.update({counter:parseInt(e.counter,10)+parseInt(1,10)})}),t.style.visibility="visible"}function pausePlayHabit(e){var t=e.parentNode.parentNode,a=t.getElementsByClassName("habit-op")[0],n=e.parentElement.parentElement.id,s=myDataRef.child(n+"/habitData/settings/"),o=a.getElementsByTagName("button");event.stopPropagation();var l;if(s.transaction(function(e){l="1"===e.pause?!1:!0}),l){for(i=0;i<o.length;i++)o[i].setAttribute("disabled",!0);t.style.opacity="0.5",e.src="../img/play.png",l=!1,s.transaction(function(e){s.update({pause:"1"})})}else{for(i=0;i<o.length;i++)o[i].removeAttribute("disabled");t.style.opacity="1",e.src="../img/pause.jpe",l=!0,s.transaction(function(e){s.update({pause:"0"})})}}function getChild(e){var t=e.parentNode.parentNode;return t}function deleteHabit(e){var t=e.parentNode,i=e.getAttribute("id"),a=buildEndPoint(i);a.remove(),t.removeChild(e)}function buildEndPoint(e){return new Firebase("https://jjb750uy9yj.firebaseio-demo.com/habits/"+e)}function editHabit(e){var t=e.parentNode.parentNode.id;document.location="edit.html?"+t}function missedADay(e){var t=e.parentNode.parentNode.getElementsByClassName("message")[0],i=t.getElementsByTagName("strong"),a=t.getElementsByTagName("meter"),n=e.parentElement.parentElement.id,s=myDataRef.child(n+"/habitData/habitProgress/");s.transaction(function(e){s.update({counter:0})}),i[0].innerHTML=0,a[0].value=0}function deleteOverlay(){var e=document.getElementById("deleteOverlay"),t=document.getElementById("overlay");t.style.visibility="visible"==t.style.visibility?"hidden":"visible",e.style.visibility="visible"==e.style.visibility?"hidden":"visible"}function deleteConfirmed(e){deleteOverlay(),deleteHabit(e)}function editOverlay(){var e=document.getElementById("editOverlay"),t=document.getElementById("overlay");t.style.visibility="visible"==t.style.visibility?"hidden":"visible",e.style.visibility="visible"==e.style.visibility?"hidden":"visible"}function editConfirmed(){editOverlay(),editHabit(this)}function displayHabit(e,t,i,a,n,s){$("#habit-list").append('<li class="slider" id="'+i+'"><ul class="habit-info"><li><div class="habit-name">'+e+'</div></li><li><img class="habit-icon" src="'+a+'" alt="habit icon"></li></ul><div class="message"><span class="message-total"><strong>'+n.counter+"</strong> days in a row! Best Record: <strong>"+n.maxRecord+'</strong><br><div height="25" width="150"><meter value="'+(n.counter%s+1)+'" max="'+s+'"> </meter></div></span><br><span class="message-today">Completed '+(n.counter%s+1)+"/"+s+'</strong> for today!</span></div><div class="habit-op"><button  type="button" class="op op-done" onclick="showMsg(this);" title="done"><img src="../img/done.svg" alt="Done"></button><button type="button" class="op op-edit" onclick="editHabit(this);" title="edit habit"><img src="../img/edit.svg" alt="Edit"></button><button type="button" class="op op-del" onclick="child = getChild(this); deleteOverlay()" title="delete habit"><img src="../img/delete.svg" alt="Del"></button><button type="button" class="op op-missed" onclick="missedADay(this)" title="Missed a day"><img src="../img/cross.svg" alt="Cross"></button></div><div class="pause" style="position:relative;left:545px;bottom:50px;display:none"><img id="img'+i+'" style="position:absolute; top: -60px;" src="../img/pause.jpe" alt="Pause" height="150" width="150" onclick="pausePlayHabit(this);"></div></li>')}var myDataRef=new Firebase("https://jjb750uy9yj.firebaseio-demo.com/habits/"),progressData,getKeys=function(e){var t=[];for(var i in e)t.push(i);return t};$(document).ready(function(){var e={},t=[];myDataRef.on("child_added",function(i){var a=i.val().habitData,n=i.name();a.hasOwnProperty("name")&&(name=a.name?a.name:"",name.trim().length>0&&(t.push({key:n,name:name}),e[n]=name)),"0"===a.settings.turnoff&&(displayHabit(a.name,a.text,n,a.iconId,a.habitProgress,a.frequencyPerDay),"1"===a.settings.pause&&(pausePlayHabit(document.getElementById("img"+n)),pausePlayHabit(document.getElementById("img"+n))))}),$(document).on("click",".habit-op",function(e){e.stopPropagation()}),$(document).on("click",".slider",function(e){var t=$(this).find(".pause");"none"==t.css("display")?($(this).animate({left:"-=100px"},"fast"),$(this).find(".pause").show("fast")):($(this).animate({left:"+=100px"},"fast"),$(this).find(".pause").hide("fast"))})});